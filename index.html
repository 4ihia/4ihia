<!DOCTYPE html>
<html>
<head>
  <title>Visor cartográfico de AEMET</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-ZfMjzrvqlG0RkC0cTj34OnEhY6U3TlySBaeho/6vM9YSrAWL1ekLrOhjFy/mvDn1N0zbzg/gSTQnEMdHjsjXQ==" crossorigin=""/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-YM74aV7TPjy0bsuV7b2cvmMcgV7R0UBW8EckfX9SjcyAz5ix5IwWgxJvplCCl4lB4I4lFfJZ8hTV1XjSg5o5NQ==" crossorigin=""></script>
</head>
<body>
  <div id="map" style="height: 100vh;"></div>
  <script>
    // Crea el mapa
    var map = L.map('map').setView([42.5, -6], 7);

    // Agrega la capa base oscura
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18
    }).addTo(map);

    // Agrega los datos de AEMET
    var url = 'https://opendata.aemet.es/opendata/api/mapasygraficos/analisisdiario/riesgo_incendio';
    var apiKey = 'introduce-tu-clave-api-aqui';
    var requestOptions = {
      method: 'GET',
      redirect: 'follow'
    };
    fetch(url + '?api_key=' + apiKey, requestOptions)
      .then(response => response.json())
      .then(result => {
        var dataUrl = result.datos;
        fetch(dataUrl)
          .then(response => response.json())
          .then(data => {
            L.geoJSON(data, {
              style: function(feature) {
                var color = '#edf8fb';
                if (feature.properties.riesgo_incendio > 2) {
                  color = '#fecc5c';
                }
                if (feature.properties.riesgo_incendio > 3) {
                  color = '#fd8d3c';
                }
                if (feature.properties.riesgo_incendio > 4) {
                  color = '#e31a1c';
                }
                if (feature.properties.riesgo_incendio > 5) {
                  color = '#800026';
                }
                return {
                  color: '#000',
			<!DOCTYPE html>
<html>
<head>
  <title>Visor cartográfico de AEMET</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-ZfMjzrvqlG0RkC0cTj34OnEhY6U3TlySBaeho/6vM9YSrAWL1ekLrOhjFy/mvDn1N0zbzg/gSTQnEMdHjsjXQ==" crossorigin=""/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-YM74aV7TPjy0bsuV7b2cvmMcgV7R0UBW8EckfX9SjcyAz5ix5IwWgxJvplCCl4lB4I4lFfJZ8hTV1XjSg5o5NQ==" crossorigin=""></script>
</head>
<body>
  <div id="map" style="height: 100vh;"></div>
  <script>
    // Crea el mapa
    var map = L.map('map').setView([42.5, -6], 7);

    // Agrega la capa base oscura
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18
    }).addTo(map);

    // Agrega los datos de AEMET
    var url = 'https://opendata.aemet.es/opendata/api/mapasygraficos/analisisdiario/riesgo_incendio';
    var apiKey = 'introduce-tu-clave-api-aqui';
    var requestOptions = {
      method: 'GET',
      redirect: 'follow'
    };
    fetch(url + '?api_key=' + apiKey, requestOptions)
      .then(response => response.json())
      .then(result => {
        var dataUrl = result.datos;
        fetch(dataUrl)
          .then(response => response.json())
          .then(data => {
            L.geoJSON(data, {
              style: function(feature) {
                var color = '#edf8fb';
                if (feature.properties.riesgo_incendio > 2) {
                  color = '#fecc5c';
                }
                if (feature.properties.riesgo_incendio > 3) {
                  color = '#fd8d3c';
                }
                if (feature.properties.riesgo_incendio > 4) {
                  color = '#e31a1c';
                }
                if (feature.properties.riesgo_incendio > 5) {
                  color = '#800026';
                }
                return {
                  color: '#000',
                 
<!DOCTYPE html>
<html>
<head>
  <title>Visor cartográfico de AEMET</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-ZfMjzrvqlG0RkC0cTj34OnEhY6U3TlySBaeho/6vM9YSrAWL1ekLrOhjFy/mvDn1N0zbzg/gSTQnEMdHjsjXQ==" crossorigin=""/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-YM74aV7TPjy0bsuV7b2cvmMcgV7R0UBW8EckfX9SjcyAz5ix5IwWgxJvplCCl4lB4I4lFfJZ8hTV1XjSg5o5NQ==" crossorigin=""></script>
</head>
<body>
  <div id="map" style="height: 100vh;"></div>
  <script>
    // Crea el mapa
    var map = L.map('map').setView([42.5, -6], 7);

    // Agrega la capa base oscura
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18
    }).addTo(map);

    // Agrega los datos de AEMET
    var url = 'https://opendata.aemet.es/opendata/api/mapasygraficos/analisisdiario/riesgo_incendio';
    var apiKey = 'introduce-tu-clave-api-aqui';
    var requestOptions = {
      method: 'GET',
      redirect: 'follow'
    };
    fetch(url + '?api_key=' + apiKey, requestOptions)
      .then(response => response.json())
      .then(result => {
        var dataUrl = result.datos;
        fetch(dataUrl)
          .then(response => response.json())
          .then(data => {
            L.geoJSON(data, {
              style: function(feature) {
                var color = '#edf8fb';
                if (feature.properties.riesgo_incendio > 2) {
                  color = '#fecc5c';
                }
                if (feature.properties.riesgo_incendio > 3) {
                  color = '#fd8d3c';
                }
                if (feature.properties.riesgo_incendio > 4) {
                  color = '#e31a1c';
                }
                if (feature.properties.riesgo_incendio > 5) {
                  color = '#800026';
                }
                return {
                  color: '#000',
                 
              weight: 1,
              fillColor: color,
              fillOpacity: 0.7
            };
          }
        }).addTo(map);
      })
      .catch(error => console.log('Error al cargar los datos: ' + error));
  })
  .catch(error => console.log('Error al obtener la URL de los datos: ' + error));
</script>
</body>
</html>
                 
